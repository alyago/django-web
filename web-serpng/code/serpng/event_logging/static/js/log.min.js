if(typeof SH=="undefined"){SH={}}SH.event_log=(function(c){var a=(function(h,i,f,j,d){h=h||false;i=i||{};f=f||{};j=j||5000;d=typeof d=="function"||function(){};request_type="POST";post_url="//"+document.domain+"/event-logging/widget-load-log";post_data_hash={name:h,parameters:i,extra:f};if(typeof JSON=="object"){b(request_type,post_url,"data="+encodeURIComponent(JSON.stringify(post_data_hash)),d,j)}else{var k="//cdnjs.cloudflare.com/ajax/libs/json2/20121008/json2.js";var g=document.createElement("script");g.type="text/javascript";g.src=k;if(g.readyState){g.onreadystatechange=function(){if(g.readyState=="loaded"||g.readyState=="complete"){g.onreadystatechange=null;b(request_type,post_url,"data="+encodeURIComponent(JSON.stringify(post_data_hash)),d,j)}}}else{g.onload=function(){b(request_type,post_url,"data="+encodeURIComponent(JSON.stringify(post_data_hash)),d,j)}}document.body.appendChild(g)}});var b=(function(h,o,k,q,m){if(h==="undefined"||(h!=="POST"&&h!=="GET")){return false}if(typeof o!=="string"){return false}k=k||"";q=typeof q=="function"?q:function(){};m=m||5000;if(c){c.ajax({type:h,url:o,data:k,success:q,timeout:m})}else{var p,d=["MSXML2.XmlHttp.5.0","MSXML2.XmlHttp.4.0","MSXML2.XmlHttp.3.0","MSXML2.XmlHttp.2.0","Microsoft.XmlHttp"];if(window.XMLHttpRequest){p=new XMLHttpRequest()}else{if(window.ActiveXObject){for(var j=0,f=d.length;j<f;j++){try{p=new ActiveXObject(d[j])}catch(l){}}}}if(p){var g=setTimeout("xhr.abort();",m);p.onreadystatechange=function(){if(p.readyState===4&&p.status===200){clearTimeout(g);q}};p.open(h,o);if(h=="POST"){p.setRequestHeader("Content-type","application/x-www-form-urlencoded")}p.send(k)}else{return false}}});return{widget_view:function(){geo_ip=window.geo_ip||false;pub_id=window.pub_id||false;if(typeof(sh_search_request_id)!="undefined"){a("widget.load",{search_request_id:sh_search_request_id,referrer:document.referrer,pub_id:pub_id,geo_ip:geo_ip})}else{a("widget.load",{referrer:document.referrer,pub_id:pub_id,geo_ip:geo_ip})}}}})(typeof jQuery!="undefined"?jQuery:null);try{var log_fn=function(){SH.event_log.widget_view()};if(window.addEventListener){window.addEventListener("load",log_fn,false)}else{if(window.attachEvent){window.attachEvent("onload",log_fn,false)}}}catch(e){};